generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model user {
  id         String   @id @db.VarChar(255)
  last_login DateTime @default(now()) @db.Timestamptz()
  login      String   @unique @db.VarChar(255)
  name       String   @db.VarChar(255)
  avatar_url String?
  email      String?  @db.VarChar(255)
  role       String?  @db.VarChar(255)
}

enum ChatRole {
  user
  assistant
}

model message_ai_chat {
  message_id String   @db.VarChar(255)
  time       DateTime @default(now()) @db.Timestamptz()
  user_id    String   @db.VarChar(255)
  role       ChatRole
  content    String

  @@id([user_id, time])
}

model message_ai_image {
  image_id   String @id @db.VarChar(255)
  message_id String @db.VarChar(255)
  image      String

  @@index([message_id])
}
